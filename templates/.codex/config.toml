# Codex CLI project configuration
# See: https://developers.openai.com/codex/config-reference/

model = "o4-mini"

# Approval policy: "suggest" | "auto-edit" | "full-auto"
approval_policy = "auto-edit"

# Read CLAUDE.md as fallback if AGENTS.md is not found
project_doc_fallback_filenames = ["CLAUDE.md"]
project_doc_max_bytes = 65536

[mcp_servers.github]
type = "stdio"
command = "sh"
args = ["-c", "GITHUB_PERSONAL_ACCESS_TOKEN=$(gh auth token) npx -y @modelcontextprotocol/server-github"]

[mcp_servers.postgres]
type = "stdio"
command = "npx"
args = ["-y", "@bytebase/dbhub", "--transport", "stdio", "--dsn", "postgresql://{{PROJECT_NAME}}:{{PROJECT_NAME}}@localhost:5432/{{PROJECT_NAME}}?sslmode=disable"]

[mcp_servers.redis]
type = "stdio"
command = "npx"
args = ["-y", "@redis/mcp@latest", "--transport", "stdio", "--url", "redis://localhost:6379"]

[mcp_servers.memory]
type = "stdio"
command = "npx"
args = ["-y", "@modelcontextprotocol/server-memory"]

[mcp_servers.memory.env]
MEMORY_FILE_PATH = "docs/spec/.llm/memory.json"

[mcp_servers.context7]
type = "stdio"
command = "npx"
args = ["-y", "@upstash/context7-mcp@latest"]

[mcp_servers.playwright]
type = "stdio"
command = "npx"
args = ["-y", "@playwright/mcp@latest"]

[mcp_servers.terraform]
type = "stdio"
command = "npx"
args = ["-y", "terraform-mcp-server"]

[mcp_servers.eslint]
type = "stdio"
command = "npx"
args = ["@eslint/mcp@latest"]

[mcp_servers.aws-documentation]
type = "stdio"
command = "uvx"
args = ["awslabs.aws-documentation-mcp-server@latest"]
